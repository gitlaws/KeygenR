<div class="prompt-container">
  <textarea
    [(ngModel)]="userPrompt"
    placeholder="e.g., 16 bars of Drake-style piano, 90 BPM"
    class="prompt-input"
  ></textarea>
  <div class="controls">
    <select [(ngModel)]="bpm" class="bpm-select">
      <option *ngFor="let bpm of bpmOptions" [value]="bpm">
        {{ bpm }} BPM
      </option>
    </select>
    <select [(ngModel)]="key" class="key-select">
      <option *ngFor="let key of keyOptions" [value]="key">{{ key }}</option>
    </select>
    <button
      (click)="toggleSpeech()"
      [disabled]="isListening"
      class="speech-btn"
    >
      {{ isListening ? "Listening..." : "Speak Prompt" }}
    </button>
    <button
      (click)="generateMidi()"
      [disabled]="!userPrompt || isGenerating"
      class="generate-btn"
    >
      {{ isGenerating ? "Generating..." : "Generate MIDI" }}
    </button>
  </div>
  <a
    *ngIf="midiUri"
    [href]="midiUri"
    download="generated-midi.mid"
    class="download-btn"
    >Download MIDI</a
  >
</div>
